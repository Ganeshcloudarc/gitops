<?xml version="1.0"?>
<launch>
 <arg name="points_in"  default="/rslidar_points"/>
 <!-- <arg name="points_in"  default="/zed2i/zed_node/point_cloud/cloud_registered"/> -->
 <arg name="config_file" default="rs_lidar_config.yaml"/>
 <!-- <arg name="config_file" default="zed_config.yaml"/> -->
 <arg name="rqt_reconfigure" default="true"/>

 <arg name="bbox_target_frame" default="rslidar"/>
 <arg name="rviz" default="true"/>

  <node name="obstacle_detector_node" pkg="lidar_obstacle_detector" type="obstacle_detector_node" output="screen">
    <!-- Input Topic Names -->
    <param name="lidar_points_topic"                  value="$(arg points_in)"/>
    <rosparam command="load" file="$(find lidar_obstacle_detector)/params/$(arg config_file)"/>


    <!-- Output Topic Names -->
    <param name="cloud_ground_topic"                  value="obstacle_detector/cloud_ground"/>
    <param name="cloud_clusters_topic"                value="obstacle_detector/cloud_clusters"/>
    <param name="jsk_bboxes_topic"                    value="obstacle_detector/jsk_bboxes"/>
    <param name="autoware_objects_topic"              value="obstacle_detector/objects"/>
    <!-- Parameters -->
    <param name="bbox_target_frame"                   value="$(arg bbox_target_frame)"/>
    <param name="rqt_reconfigure" value="$(arg rqt_reconfigure)"/>
  </node>

  <node name="filtering_node" pkg="lidar_obstacle_detector" type="filtering" />

  <!-- Dynamic Reconfigure GUI -->
  <!-- <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure"  if="$(eval rqt_reconfigure)"/> -->
  <!-- Rviz -->
  <node type="rviz" name="rviz1" pkg="rviz" args="-d $(find lidar_obstacle_detector)/rviz/mai_city.rviz" if="$(eval rviz)" />

</launch>